class t{static W=15;static X=25;static t=1/(t.W*t.X);static i=1;static s=0;y=0;x=0;S=0;constructor(i,e){this.y=i||0,this.x=e||0,this.S=i*t.X+e}h(t){return this.y===t.y&&this.x===t.x}l(i){let e=Math.abs(this.y-i.y),s=Math.abs(this.x-i.x);return s+e+(s&&e?t.t:0)}}class i{static u=0;static p=1;static g=2;static v=3;static O=4;Y=null;Z=null;S=0;f=0;g=0;h=0;M=0;k=i.u;constructor(e,s,n=null){if(this.Y=n,this.Z=e,this.k=i.A(this,n),this.S=2*e.S+this.k%2,n){let e=n.k!==i.u&&this.k%2!=n.k%2;this.M=n.M+(e?1:0),this.g=n.g+1+(e?t.t:0)}this.h=this.Z.l(s),this.f=this.g+this.h}get y(){return this.Z.y}get x(){return this.Z.x}static A(t,e){if(!e)return i.u;let s=t.y,n=t.x,r=e.y,h=e.x;return s==r-1?i.p:n==h+1?i.g:s==r+1?i.v:n==h-1?i.O:void 0}T(t){return this.g!==t.g?this.g<t.g:this.M!==t.M?this.M<t.M:this.f!==t.f&&this.f<t.f}}class e{C=[];V=[];D={};P={};constructor(){}get tt(){return this.C[0].length}get it(){return this.C.length}et(i){let e=t=>Array.isArray(t);if(!e(i)||!i.every((s,n)=>e(s)&&s.length==i[0].length&&s.every(i=>i===t.i||i===t.s)))throw"invalid grid";this.C=i}B(i,e,s){i<this.it&&e<this.tt&&(s===t.i||s===t.s)&&(this.C[i][e]=s)}F(t,i){t.Y=i.Y,t.Z=i.Z,t.M=i.M,t.k=i.k,t.S=i.S,t.f=i.f,t.g=i.g,t.h=i.h}L(t){this.V.push(t),this.D[t.S]=t}N(t){return void 0!==this.D[t.S]}R(t){this.P[t.S]=t}$(t){return void 0!==this.P[t.S]}q(e){let s=[[-1,0],[0,1],[1,0],[0,-1]],n=this.C,r=[];for(let h of s){let s=e.y+h[0],o=e.x+h[1];if(s>=this.it||o>=this.tt)continue;if(n[s][o]===t.i)continue;let c=new t(s,o);if(e.Y&&c.h(e.Y.Z))continue;let l=new i(c,this.G,e);r.push(l)}return r}K(t){let i=this.q(t);for(const t of i){if(this.$(t))continue;if(!this.N(t)){let i=t.S+(t.S%2?-1:1),e=this.D[i]||this.P[i];if(e&&(e.g<t.g||e.g==t.g&&e.M<t.M))continue;this.L(t);continue}let i=this.D[t.S];t.T(i)&&this.F(i,t)}}U(){let t,i;for(let e=0;e<this.V.length;e++){let s=this.V[e];(!t||s.f<t.f)&&(t=s,i=e)}return t&&(i!==this.V.length-1?this.V[i]=this.V.pop():this.V.pop(),delete this.D[t.S]),t}_(t){let i=[],e=t;for(;e;)i.push(e),e=e.Y;return i.reverse()}H(t,e,s){for(this.et(t),this.J=e,this.G=s,this.L(new i(e,s,null));this.V.length>0;){let t=this.U();if(t.Z.h(s)){let i=this._(t);return console.log("searched nodes: "+(this.V.length+Object.keys(this.P).length)),i}this.R(t),this.K(t)}return[]}}document.querySelector("#d1").innerHTML="<table>"+("<tr>"+"<td>&nbsp;</td>".repeat(25)+"</tr>").repeat(15)+"</table>";let s=document.querySelector("#d1 table");function c(t,i){return t.classList.contains(i)}function u(t,i,...e){return t.classList.toggle(i,...e)}function n(t){return s.rows[t[0]].cells[t[1]]}function r(t){return[t.parentElement.rowIndex,t.cellIndex]}function a(t){u(t,"close",!1),u(t,"open",!1),u(t,"path",!1),t.removeAttribute("title"),t.innerHTML="&nbsp;"}function f(){for(let t of s.querySelectorAll(".close, .open, .path"))a(t)}function l(i,r){f();let h=new t(...i),o=new t(...r),l=t=>n([t.y,t.x]),a=function(t,i){let e=new Array(t.rows.length);for(var s=0;s<t.rows.length;s++){e[s]=new Array(t.rows[s].cells.length);for(var n=0;n<t.rows[s].cells.length;n++)e[s][n]=i(t.rows[s].cells[n],s,n)}return e}(s,i=>c(i,"block")?t.i:t.s),d=new e,g=d.H(a,h,o);console.log(g);let p=g.slice(1,-1);for(let t of p)u(l(t),"path",!0);Object.keys(d.P).forEach(t=>{let i=d.P[t],e=l(i);u(e,"close",!0),e.setAttribute("title",["g: "+i.g,"h: "+i.h,"f: "+i.f,"turns: "+i.M,"code: "+i.S,"row: "+i.y,"col: "+i.x].join(" \n").replace(/(\.\d{3})\d+/g,"$1")),e.textContent=i.M}),d.V.forEach(t=>{let i=l(t);u(i,"open",!0),i.setAttribute("title",["g: "+t.g,"h: "+t.h,"f: "+t.f,"turns: "+t.M,"code: "+t.S,"row: "+t.y,"col: "+t.x].join(" \n").replace(/(\.\d{3})\d+/g,"$1")),i.textContent=i.textContent.trim()+t.M})}s.onclick=function(t){if("TD"!==t.target.tagName)return;let i=t.target;c(i,"start")||c(i,"end")||(u(i,"block"),f(),l())},s.onmouseover=function(t){if("TD"!==t.target.tagName)return;let i=t.target;document.querySelector("#msg").textContent=i.getAttribute("title")};let o=n([5,5]),h=n([12,20]);u(o,"start"),u(h,"end"),[[4,13],[5,13],[6,13],[7,13],[9,5],[9,6],[9,7],[9,8],[5,9],[5,10],[5,11],[5,12],[8,17],[8,20]].forEach(t=>u(n(t),"block")),l(r(o),r(h));